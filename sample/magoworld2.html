<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>MagoWorld</title>
	<link rel="stylesheet" href="./demo.css" />
	<link rel="stylesheet" href="../src/engine/cesium/Widgets/widgets.css" />
	<script type="text/javascript" src="../../externlib/jquery/jquery.js"></script>
	<script type="text/javascript" src="../src/engine/cesium/Cesium.js"></script>
	<script type="text/javascript" src="../build/mago3d/mago3d.js"></script>
</head>

<body>
<ul class="nav">
	<li id="homeMenu" class="home">
		<img src="/images/ko/homepage/home-icon.png" style="width: 35px; height: 35px; padding-right: 2px;" title="Home" />
	</li>
	<li onclick="doTest();">
		test
	</li>
</ul>

<div id="magoContainer" style="position: absolute; width:100%; height:100%; margin-top:0; padding:0; overflow:hidden;">
	<canvas id="objectLabel"></canvas>
</div>

<script>
	var managerFactory = null;
	var dataInformationUrl = "/sample/persistence/json/";

	var tt;
	var ttt;
	var tttt;
	var baseMap;

	magoStart('magoContainer');
    // mago3d start, policy loading
	function magoStart(renderDivId) {
		$.ajax({
			url: dataInformationUrl + "geopolicy.json",
			type: "GET",
			dataType: "json",
			success: function(serverPolicy){
				var osmCycleLayer = new Mago3D.XYZLayer({
					urlFunction : function(coordinate) {
						var url = 'https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png';
						return url.replace('{a-c}',getDomainSharding())
						.replace('{z}',coordinate.z)
						.replace('{y}',coordinate.y)
						.replace('{x}',coordinate.x);
						
						function getDomainSharding() {
							var shardingList = ['a','b','c'];
							var randomIndex = Math.floor( (Math.random() * (3)));
							
							return shardingList[randomIndex];
						}
					}
				});

				managerFactory = new Mago3D.Mago3d(renderDivId,serverPolicy,undefined,{
					layers : [
						osmCycleLayer
					]
				});
			},
			error: function(e){
				alert(e.responseText);
			}
		});
	}

	function doTest(){

	}
</script>
</body>
</html>